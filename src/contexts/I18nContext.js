import React, { createContext, useContext, useEffect, useMemo, useState } from 'react';

const I18nContext = createContext();

const messages = {
  en: {
    menu: 'Menu',
    visitorCheckIn: 'Visitor Check-In',
    findReturning: 'Find returning visitors or register new ones.',
    manualEntry: 'Manual Entry',
    scanQr: 'Scan QR Code',
    searchPlaceholder: 'Enter Aadhaar, Phone, or Badge ID...',
    search: 'Search',
    photoCapture: 'Photo Capture',
    startCamera: 'Start Camera',
    stopCamera: 'Stop Camera',
    next: 'Next',
    previous: 'Previous',
    completeCheckIn: 'Complete Check-In',
    dashboard: 'Dashboard',
    dashboardSubtitle: "Welcome back! Here's what's happening at your facility today.",
    realtimeConnected: 'Real-time Connected',
    disconnected: 'Disconnected',
    currentVisitors: 'Current Visitors',
    todaysTotal: "Today's Total",
    overdueVisits: 'Overdue Visits',
    recentCheckins: 'Recent Check-ins',
    hourlyVisitorDistribution: 'Hourly Visitor Distribution',
    visitPurposes: 'Visit Purposes',
    topHostsToday: 'Top Hosts Today',
    visitorsLbl: 'visitors',
    recentActivity: 'Recent Activity',
    quickActions: 'Quick Actions',
    newCheckin: 'New Check-in',
    viewAllVisitors: 'View All Visitors',
    viewAnalytics: 'View Analytics',
    sidebarDashboard: 'Dashboard',
    sidebarVisitors: 'Visitors',
    sidebarCheckIn: 'Check In',
    sidebarAnalytics: 'Analytics',
    sidebarAdmin: 'Admin Panel',
    sidebarSettings: 'Settings',
    visitorsTitle: 'Visitors',
    visitorsSearchPlaceholder: 'Search by name, phone, email or ID...',
    visitorsStatus: 'Status',
    visitorsActions: 'Actions',
    adminManagement: 'Admin Management',
    addAdmin: 'Add Admin',
    settingsTitle: 'Settings',
    saveChanges: 'Save Changes',
    quickStats: 'Quick Stats',
    systemStatus: 'System Status',
    emergency: 'Emergency',
    // Analytics page translations
    analyticsDashboard: 'Analytics Dashboard',
    analyticsDescription: 'Comprehensive insights into visitor traffic and patterns',
    analyticsAndReports: 'Analytics & Reports',
    exportReport: 'Export Report',
    exportExcel: 'Export Excel',
    exportPDF: 'Export PDF',
    markdownFormat: 'Markdown (.md)',
    pdfFormat: 'PDF Document (.pdf)',
    excelFormat: 'Excel Spreadsheet (.xlsx)',
    analysisType: 'Analysis Type',
    daily: 'Daily',
    weekly: 'Weekly',
    monthly: 'Monthly',
    timePeriod: 'Time Period',
    customRange: 'Custom Range',
    to: 'to',
    dataSource: 'Data Source',
    demoData: 'Demo Data',
    liveData: 'Live Data',
    totalVisitors: 'Total Visitors',
    vsYesterday: 'vs yesterday',
    active: 'Active',
    avgDuration: 'Avg. Duration',
    vsLastWeek: 'vs last week',
    peakHour: 'Peak Hour',
    today: 'today',
    visitorTrends: 'Visitor Trends',
    date: 'Date',
    // Emergency related translations
    emergencyManagement: 'Emergency Management',
    emergencyStatus: 'Emergency Status',
    emergencyTypes: 'Emergency Types',
    allStatuses: 'All Statuses',
    allTypes: 'All Types',
    searchEmergencies: 'Search Emergencies...',
    // Check-in form translations
    firstName: 'First Name',
    lastName: 'Last Name',
    emailAddress: 'Email Address',
    phoneNumber: 'Phone Number',
    purposeOfVisit: 'Purpose of Visit',
    expectedDuration: 'Expected Duration (minutes)',
    company: 'Company',
    // Department translations
    'Anti-Human Trafficking Unit': 'मानव तस्करी विरोधी युनिट',
    'Antiterrorism Squad': 'आतंकवाद विरोधी दल',
    'Application Branch': 'अर्ज शाखा',
    'Control Room': 'नियंत्रण कक्ष',
    'Cyber Police Station': 'सायबर पोलीस स्टेशन',
    'District Special Branch': 'जिल्हा विशेष शाखा',
    'Economic Offences Wing': 'आर्थिक गुन्हे विभाग',
    'Local Crime Branch': 'स्थानिक गुन्हे शाखा',
    'Mahila Cell': 'महिला सेल',
    'Security Branch': 'सुरक्षा शाखा',
    'Welfare Branch': 'कल्याण शाखा',
    'Superintendent of Police (SP)': 'पोलीस अधीक्षक (SP)',
    'Additional Superintendent of Police (Additional SP)': 'अतिरिक्त पोलीस अधीक्षक (Additional SP)',
    resolved: 'Resolved',
    cancelled: 'Cancelled',
    departmental: 'Departmental',
    visitor: 'Visitor',
    refresh: 'Refresh',
    count: 'Count',
    location: 'Location',
    reportedBy: 'Reported By',
    reportedAt: 'Reported At',
    resolveEmergency: 'Resolve Emergency',
    cancelEmergency: 'Cancel Emergency',
    emergencyDetails: 'Emergency Details',
    description: 'Description',
    status: 'Status',
    type: 'Type',
    actions: 'Actions',
    noEmergencies: 'No emergencies found',
  },
  mr: {
    menu: 'मेनू',
    visitorCheckIn: 'भेट देणाऱ्यांची नोंद',
    findReturning: 'परत येणाऱ्यांना शोधा किंवा नवीन नोंद करा.',
    manualEntry: 'हस्तलिखित नोंद',
    scanQr: 'QR कोड स्कॅन',
    searchPlaceholder: 'आधार, फोन किंवा बॅज आयडी टाका...',
    search: 'शोधा',
    photoCapture: 'फोटो कॅप्चर',
    startCamera: 'कॅमेरा सुरू करा',
    stopCamera: 'कॅमेरा बंद करा',
    next: 'पुढे',
    previous: 'मागे',
    completeCheckIn: 'चेक-इन पूर्ण करा',
    dashboard: 'डॅशबोर्ड',
    dashboardSubtitle: 'पुन्हा स्वागत! आज आपल्या ठिकाणी काय चालू आहे ते पहा.',
    realtimeConnected: 'रिअल-टाईम जोडलेले',
    disconnected: 'कनेक्शन तुटले',
    currentVisitors: 'सध्याचे भेट देणारे',
    todaysTotal: 'आजची एकूण संख्या',
    overdueVisits: 'उशीरा भेटी',
    recentCheckins: 'अलीकडील चेक-इन्स',
    hourlyVisitorDistribution: 'तासानुसार भेट देणारे',
    visitPurposes: 'भेटीचे उद्देश',
    topHostsToday: 'आजचे होस्ट',
    visitorsLbl: 'भेट देणारे',
    recentActivity: 'अलीकडील हालचाल',
    quickActions: 'त्वरित क्रिया',
    newCheckin: 'नवीन चेक-इन',
    viewAllVisitors: 'सर्व भेट देणारे',
    viewAnalytics: 'विश्लेषण पहा',
    sidebarDashboard: 'डॅशबोर्ड',
    sidebarVisitors: 'भेट देणारे',
    sidebarCheckIn: 'चेक इन',
    sidebarAnalytics: 'विश्लेषण',
    sidebarAdmin: 'प्रशासन पॅनेल',
    sidebarSettings: 'सेटिंग्स',
    visitorsTitle: 'भेट देणारे',
    visitorsSearchPlaceholder: 'नाव, फोन, ईमेल किंवा आयडीने शोधा...',
    visitorsStatus: 'स्थिती',
    visitorsActions: 'क्रिया',
    adminManagement: 'प्रशासक व्यवस्थापन',
    addAdmin: 'प्रशासक जोडा',
    settingsTitle: 'सेटिंग्स',
    saveChanges: 'बदल जतन करा',
    quickStats: 'द्रुत मोजमाप',
    systemStatus: 'प्रणाली स्थिती',
    emergency: 'आपत्कालीन',
    // Emergency related translations
    emergencyManagement: 'आपत्कालीन व्यवस्थापन',
    emergencyStatus: 'आपत्कालीन स्थिती',
    emergencyTypes: 'आपत्कालीन प्रकार',
    allStatuses: 'सर्व स्थिती',
    allTypes: 'सर्व प्रकार',
    active: 'सक्रिय',
    resolved: 'निराकरण केलेले',
    cancelled: 'रद्द केलेले',
    departmental: 'विभागीय',
    visitor: 'भेट देणारे',
    refresh: 'रिफ्रेश करा',
    count: 'संख्या',
    location: 'स्थान',
    reportedBy: 'यांनी नोंदवले',
    reportedAt: 'नोंदणी वेळ',
    resolveEmergency: 'आपत्कालीन निराकरण करा',
    cancelEmergency: 'आपत्कालीन रद्द करा',
    emergencyDetails: 'आपत्कालीन तपशील',
    description: 'वर्णन',
    status: 'स्थिती',
    type: 'प्रकार',
    actions: 'क्रिया',
    noEmergencies: 'कोणतीही आपत्कालीन स्थिती आढळली नाही',
    searchEmergencies: 'आपत्कालीन शोधा...',
    // Check-in form translations
    firstName: 'नाव',
    lastName: 'आडनाव',
    emailAddress: 'ईमेल पत्ता',
    phoneNumber: 'फोन नंबर',
    purposeOfVisit: 'भेटीचा उद्देश',
    expectedDuration: 'अपेक्षित कालावधी (मिनिटे)',
    company: 'कंपनी',
    // Department translations
    'Anti-Human Trafficking Unit': 'मानव तस्करी विरोधी युनिट',
    'Antiterrorism Squad': 'आतंकवाद विरोधी दल',
    'Application Branch': 'अर्ज शाखा',
    'Control Room': 'नियंत्रण कक्ष',
    'Cyber Police Station': 'सायबर पोलीस स्टेशन',
    'District Special Branch': 'जिल्हा विशेष शाखा',
    'Economic Offences Wing': 'आर्थिक गुन्हे विभाग',
    'Local Crime Branch': 'स्थानिक गुन्हे शाखा',
    'Mahila Cell': 'महिला सेल',
    'Security Branch': 'सुरक्षा शाखा',
    'Welfare Branch': 'कल्याण शाखा',
    'Superintendent of Police (SP)': 'पोलीस अधीक्षक (SP)',
    'Additional Superintendent of Police (Additional SP)': 'अतिरिक्त पोलीस अधीक्षक (Additional SP)',
  }
};

export const I18nProvider = ({ children }) => {
  const [lang, setLang] = useState('en');

  useEffect(() => {
    const saved = localStorage.getItem('lang');
    if (saved) setLang(saved);
  }, []);

  const toggleLang = () => {
    setLang((prev) => {
      const next = prev === 'en' ? 'mr' : 'en';
      localStorage.setItem('lang', next);
      return next;
    });
  };

  const t = useMemo(() => {
    const dict = messages[lang] || messages.en;
    return (key) => dict[key] ?? key;
  }, [lang]);

  return (
    <I18nContext.Provider value={{ lang, setLang, toggleLang, t }}>
      {children}
    </I18nContext.Provider>
  );
};

export const useI18n = () => useContext(I18nContext);


